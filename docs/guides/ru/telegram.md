Настройка уведомлений в Telegram
=========

1.  Создайте бота Telegram при помощи бота botfather.

 Диалог с ботом выглядит следующим образом:
 > **Пользователь**: `/newbot`
 
 > **Ответ бота**: `...choose a name for your bot`
 
 > **Пользователь**: `yourbotname` (yourbotname - имя вашего бота)
 
 > **Ответ бота**: `...choose a username for your bot. It must end in "bot"`
 
 > **Пользователь**: `yourbotname_bot` (yourbotname_bot - username вашего бота)
 
 > **Ответ бота**: `...Use this token to access the HTTP API: <токен>`

 При необходимости можно задать боту приветственное сообщение, которое будет отображаться пользователям:
 > **Пользователь**: `/setdescription`

 > **Ответ бота**: `OK. Send me the new description for the bot...`

 > **Пользователь**:
 ```
 Это бот **Iris CRM** для получения уведомлений. Чтобы получать уведомления нужно сделать следующее:
 1. Написать боту что-нибудь в этот чат
 2. Связать пользователя Iris CRM и данный чат, указав его в поле "Telegram (id чата)" карточки пользователя
 3. Установить галочку "Получать уведомления по telegram" в карточке пользователя
 ```
 Подробнее о создании бота в официальном [руководстве](https://core.telegram.org/bots#6-botfather)

2.  Измените системные параметры `telegram_bot_username` и `telegram_bot_api_key`, указав в них значения из предыдущего шага

3.  Пользователи добавляют созданый бот и начинают чат с ним, отправив боту  сообщение с произвольным текстом

4.  Свяжите пользователей Iris CRM и чаты пользователей с ботом. Для этого в карточке пользователя укажите чат в поле `Telegram (id чата)`. При нажатии на кнопку откроется диалог со списком всех сообщений боту за последние 24 часа. В этом диалоге выберите любое сообщение от необходимого пользователя

5.  Установите галочку `Получать уведомления по telegram` в карточке пользователя

6.  Проверьте, установлена ли галочка `Telegram` и заполнено ли поле `Текст telegram уведомления` в карточке напоминания у необходимых напоминаний

